<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Dearest Nandini</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500&display=swap" rel="stylesheet">
    <style>
        @keyframes floatUp {
          0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
          }
          100% {
            transform: translateY(-100vh) rotate(360deg);
            opacity: 0;
          }
        }

        @keyframes scaleIn {
          from {
            transform: scale(0.8);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }

        .animate-scaleIn {
          animation: scaleIn 0.3s ease-out;
        }
        
        .font-playfair {
          font-family: 'Playfair Display', serif;
        }
        
        .font-poppins {
          font-family: 'Poppins', sans-serif;
        }

        .content-card {
           backdrop-filter: blur(10px);
           -webkit-backdrop-filter: blur(10px);
        }

        .password-input {
          width: 40px;
          height: 50px;
          text-align: center;
          font-size: 1.5rem;
          font-weight: bold;
          border: 2px solid #e5e7eb;
          border-radius: 10px;
          background: white;
          transition: all 0.3s;
        }

        .password-input:focus {
          border-color: #ec4899;
          box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
          transform: scale(1.05);
        }

        .password-input.filled {
          border-color: #f472b6;
          background-color: #fdf2f8;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Heart SVG component
        const Heart = ({ style }) => React.createElement('svg', {
            style: style,
            className: "absolute text-pink-300/60",
            xmlns: "http://www.w3.org/2000/svg",
            viewBox: "0 0 24 24",
            fill: "currentColor",
            width: "24px",
            height: "24px"
        }, React.createElement('path', {
            d: "M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
        }));

        // Popup Component
        const Popup = ({ onClose }) => React.createElement('div', {
            className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm"
        }, React.createElement('div', {
            className: "relative bg-gradient-to-br from-pink-100 to-rose-100 rounded-3xl shadow-2xl p-8 max-w-md mx-4 transform animate-scaleIn"
        }, [
            React.createElement('button', {
                key: 'close-btn',
                onClick: onClose,
                className: "absolute top-4 right-4 text-rose-600 hover:text-rose-800 transition-colors"
            }, React.createElement('svg', {
                xmlns: "http://www.w3.org/2000/svg",
                width: "24",
                height: "24",
                viewBox: "0 0 24 24",
                fill: "none",
                stroke: "currentColor",
                strokeWidth: "2",
                strokeLinecap: "round",
                strokeLinejoin: "round"
            }, [
                React.createElement('path', { key: 'path1', d: "M18 6 6 18" }),
                React.createElement('path', { key: 'path2', d: "m6 6 12 12" })
            ])),
            React.createElement('div', { key: 'content', className: "text-center" }, [
                React.createElement('div', { key: 'icon', className: "mb-6" }, 
                    React.createElement('svg', {
                        xmlns: "http://www.w3.org/2000/svg",
                        width: "64",
                        height: "64",
                        viewBox: "0 0 24 24",
                        fill: "currentColor",
                        className: "mx-auto text-pink-500"
                    }, React.createElement('path', {
                        d: "M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                    }))
                ),
                React.createElement('h2', { 
                    key: 'title',
                    className: "font-playfair text-3xl font-bold text-rose-800 mb-4"
                }, "You're Too Cute! 🐵"),
                React.createElement('div', { 
                    key: 'message',
                    className: "font-poppins text-gray-700 text-lg leading-relaxed"
                }, [
                    React.createElement('p', { key: 'p1', className: "mb-4" }, 
                        "And I am your Ravi. I will always be yours, my dear Nandini."
                    ),
                    React.createElement('p', { key: 'p2', className: "italic text-rose-600" }, 
                        "I am tired and this doesn't mean I am going far from you. I'm always here, loving you. ❤️"
                    ),
                    React.createElement('p', { key: 'p3', className: "mt-4 font-semibold" }, 
                        "- Your Miss Pengu"
                    )
                ]),
                React.createElement('button', {
                    key: 'close-button',
                    onClick: onClose,
                    className: "mt-6 bg-rose-500 text-white font-poppins font-bold py-2 px-6 rounded-full hover:bg-rose-600 transition-colors"
                }, "Close")
            ])
        ]));

        // Main App Component
        function App() {
            const messages = [
                "I miss your smile, your laugh, and the way you look at me. I'm sorry for making you sad.",
                "Every moment without you feels incomplete. Please forgive me, Nandini.",
                "You are the best thing that has ever happened to me, and I can't bear the thought of losing you. I am truly sorry.",
                "My world is so much better with you in it. I was wrong, and I'm so sorry for hurting you.",
                "I promise to listen more, to be more understanding, and to always cherish you. Please give me another chance.",
                "Being apart from you is harder than I ever imagined. I'm sorry for my mistakes.",
                "My heart aches knowing I hurt you. You mean everything to me. I love you and I am sorry.",
                "Can we go back to how we were? Full of laughs and happiness. It's all my fault. Forgive me, my love."
            ];

            const [currentMessageIndex, setCurrentMessageIndex] = useState(0);
            const [password, setPassword] = useState(['', '', '', '', '', '']);
            const [showPopup, setShowPopup] = useState(false);
            const inputRefs = useRef([]);

            const showNextMessage = () => {
                setCurrentMessageIndex((prevIndex) => (prevIndex + 1) % messages.length);
            };

            // FIX: Check password after state update using useEffect
            useEffect(() => {
                if (password.join('') === 'BANDAR') {
                    setShowPopup(true);
                }
            }, [password]); // This will run every time password changes

            const handlePasswordChange = (index, value) => {
                if (value.length > 1) {
                    value = value.charAt(0);
                }
                
                const newPassword = [...password];
                newPassword[index] = value.toUpperCase();
                setPassword(newPassword);

                if (value && index < 5) {
                    inputRefs.current[index + 1].focus();
                }
            };

            const handleKeyDown = (index, e) => {
                if (e.key === 'Backspace' && !password[index] && index > 0) {
                    inputRefs.current[index - 1].focus();
                }
            };

            const handlePaste = (e) => {
                e.preventDefault();
                const pasteData = e.clipboardData.getData('text').slice(0, 6).toUpperCase();
                const newPassword = [...password];
                
                pasteData.split('').forEach((char, index) => {
                    if (index < 6) {
                        newPassword[index] = char;
                    }
                });
                
                setPassword(newPassword);
                
                const lastFilledIndex = Math.min(pasteData.length - 1, 5);
                inputRefs.current[lastFilledIndex].focus();
            };

            // Create hearts for background
            const hearts = Array.from({ length: 20 }).map((_, i) => {
                const style = {
                    left: `${Math.random() * 100}%`,
                    top: `${Math.random() * 100}%`,
                    transform: `scale(${Math.random() * 0.8 + 0.2})`,
                    animation: `floatUp 15s infinite linear ${Math.random() * 15}s`,
                };
                return React.createElement(Heart, { key: i, style: style });
            });

            return React.createElement(React.Fragment, null, [
                showPopup && React.createElement(Popup, { 
                    key: 'popup',
                    onClose: () => setShowPopup(false) 
                }),
                
                React.createElement('div', {
                    key: 'main-container',
                    className: "relative min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-pink-200 via-rose-200 to-purple-200 overflow-hidden p-4"
                }, [
                    React.createElement('div', {
                        key: 'hearts',
                        className: "absolute inset-0 z-0"
                    }, hearts),
                    
                    React.createElement('div', {
                        key: 'content-card',
                        className: "relative z-10 w-full max-w-lg mx-auto text-center bg-white/70 content-card rounded-2xl shadow-xl p-6 md:p-10 transition-transform transform hover:scale-103 duration-500"
                    }, [
                        React.createElement('h1', {
                            key: 'title',
                            className: "font-playfair text-4xl md:text-5xl font-bold text-rose-800 mb-2"
                        }, "My Dearest Nandini,"),
                        
                        React.createElement('p', {
                            key: 'subtitle',
                            className: "font-poppins text-lg text-gray-700 mb-6"
                        }, "I've been a fool, and I am so, so sorry..."),
                        
                        React.createElement('div', {
                            key: 'message-box',
                            className: "bg-rose-50/80 rounded-lg p-6 min-h-[150px] flex items-center justify-center transition-opacity duration-300 mb-6"
                        }, React.createElement('p', {
                            className: "font-poppins text-xl text-gray-800 italic"
                        }, `"${messages[currentMessageIndex]}"`)),
                        
                        React.createElement('div', { key: 'password-section' }, [
                            React.createElement('p', {
                                key: 'hint',
                                className: "font-poppins text-gray-600 mb-4"
                            }, ["Can you guess our special word?", React.createElement('br'), 
                                React.createElement('span', {
                                    className: "text-sm text-pink-600"
                                }, "Hint: First letter is B, last letter is R")]),
                            
                            React.createElement('div', {
                                key: 'inputs',
                                className: "flex justify-center space-x-2 mb-4"
                            }, password.map((char, index) => 
                                React.createElement('input', {
                                    key: index,
                                    ref: el => inputRefs.current[index] = el,
                                    type: "text",
                                    maxLength: "1",
                                    value: char,
                                    onChange: (e) => handlePasswordChange(index, e.target.value),
                                    onKeyDown: (e) => handleKeyDown(index, e),
                                    onPaste: handlePaste,
                                    className: `password-input ${char ? 'filled' : ''}`,
                                    autoFocus: index === 0
                                })
                            )),
                            
                            React.createElement('p', {
                                key: 'feedback',
                                className: "font-poppins text-sm text-gray-500"
                            }, password.join('') === 'BANDAR' ? '🎉 Correct! You guessed it!' : 'Think of something cute...')
                        ]),
                        
                        React.createElement('button', {
                            key: 'next-btn',
                            onClick: showNextMessage,
                            className: "mt-4 bg-pink-500 text-white font-poppins font-bold py-3 px-8 rounded-full shadow-lg hover:bg-pink-600 focus:outline-none focus:ring-4 focus:ring-pink-300 transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center mx-auto"
                        }, [
                            React.createElement('svg', {
                                key: 'icon',
                                xmlns: "http://www.w3.org/2000/svg",
                                width: "24",
                                height: "24",
                                viewBox: "0 0 24 24",
                                fill: "none",
                                stroke: "currentColor",
                                strokeWidth: "2",
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                className: "mr-2 h-5 w-5"
                            }, React.createElement('path', {
                                d: "M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
                            })),
                            "A message from my heart"
                        ]),
                        
                        React.createElement('p', {
                            key: 'final-message',
                            className: "font-playfair text-2xl text-rose-700 mt-6"
                        }, "I Love You More Than Words Can Say.")
                    ])
                ])
            ]);
        }

        // Render the app
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>
